# Contributing to Flowise to LangChain Converter\n\nThank you for your interest in contributing to the Flowise to LangChain Converter! This guide will help you get started with contributing to the project.\n\n## Table of Contents\n\n- [Code of Conduct](#code-of-conduct)\n- [Getting Started](#getting-started)\n- [Development Workflow](#development-workflow)\n- [Project Structure](#project-structure)\n- [Coding Standards](#coding-standards)\n- [Testing Guidelines](#testing-guidelines)\n- [Documentation](#documentation)\n- [Pull Request Process](#pull-request-process)\n- [Issue Guidelines](#issue-guidelines)\n- [Release Process](#release-process)\n\n## Code of Conduct\n\nBy participating in this project, you agree to abide by our Code of Conduct:\n\n### Our Pledge\n\nWe pledge to make participation in our project a harassment-free experience for everyone, regardless of age, body size, disability, ethnicity, gender identity and expression, level of experience, nationality, personal appearance, race, religion, or sexual identity and orientation.\n\n### Our Standards\n\n**Positive behaviors include:**\n- Using welcoming and inclusive language\n- Being respectful of differing viewpoints and experiences\n- Gracefully accepting constructive criticism\n- Focusing on what is best for the community\n- Showing empathy towards other community members\n\n**Unacceptable behaviors include:**\n- Harassment, trolling, or discriminatory comments\n- Publishing others' private information without permission\n- Other conduct which could reasonably be considered inappropriate\n\n## Getting Started\n\n### Prerequisites\n\n- **Node.js**: Version 18.0.0 or higher\n- **npm**: Version 8.0.0 or higher\n- **Git**: For version control\n- **TypeScript**: Familiarity with TypeScript development\n- **LangChain**: Basic understanding of LangChain concepts\n\n### Fork and Clone\n\n1. **Fork the repository** on GitHub\n2. **Clone your fork** locally:\n   ```bash\n   git clone https://github.com/yourusername/flowise-to-langchain.git\n   cd flowise-to-langchain\n   ```\n\n3. **Add upstream remote**:\n   ```bash\n   git remote add upstream https://github.com/original/flowise-to-langchain.git\n   ```\n\n### Initial Setup\n\n1. **Install dependencies**:\n   ```bash\n   cd flowise-to-langchain\n   npm install\n   ```\n\n2. **Build the project**:\n   ```bash\n   npm run build\n   ```\n\n3. **Run tests**:\n   ```bash\n   npm test\n   ```\n\n4. **Test CLI functionality**:\n   ```bash\n   npm run dev -- --version\n   npm run test:cli\n   ```\n\n### Environment Setup\n\n1. **Create environment file**:\n   ```bash\n   cp .env.example .env\n   ```\n\n2. **Add required API keys** (for testing):\n   ```bash\n   OPENAI_API_KEY=your_test_key\n   LANGFUSE_PUBLIC_KEY=your_langfuse_key\n   LANGFUSE_SECRET_KEY=your_langfuse_secret\n   ```\n\n3. **Install global CLI** (optional):\n   ```bash\n   npm run install:global\n   ```\n\n## Development Workflow\n\n### Branch Strategy\n\nWe use **Git Flow** with the following branches:\n\n- **`main`**: Production-ready code\n- **`develop`**: Integration branch for features\n- **`feature/*`**: New features (e.g., `feature/add-anthropic-support`)\n- **`bugfix/*`**: Bug fixes (e.g., `bugfix/fix-circular-deps`)\n- **`hotfix/*`**: Critical production fixes\n- **`release/*`**: Release preparation\n\n### Creating a Feature Branch\n\n1. **Update your local repository**:\n   ```bash\n   git checkout develop\n   git pull upstream develop\n   ```\n\n2. **Create feature branch**:\n   ```bash\n   git checkout -b feature/your-feature-name\n   ```\n\n3. **Make your changes** and commit regularly:\n   ```bash\n   git add .\n   git commit -m \"feat: add support for new node type\"\n   ```\n\n4. **Push to your fork**:\n   ```bash\n   git push origin feature/your-feature-name\n   ```\n\n### Development Commands\n\n```bash\n# Development mode with hot reload\nnpm run dev\n\n# Watch mode for TypeScript compilation\nnpm run build:watch\n\n# Run tests in watch mode\nnpm run test:watch\n\n# Run tests with coverage\nnpm run test:coverage\n\n# Lint and format code\nnpm run lint\nnpm run format\n\n# Type checking\nnpm run type-check\n```\n\n## Project Structure\n\nUnderstanding the project structure is crucial for effective contributions:\n\n```\nflowise-to-langchain/\n├── src/\n│   ├── cli/                    # Command-line interface\n│   │   ├── commands/           # CLI command implementations\n│   │   │   ├── convert.ts      # Convert command\n│   │   │   ├── validate.ts     # Validate command\n│   │   │   └── test.ts         # Test command\n│   │   ├── index.ts            # CLI entry point\n│   │   └── utils/              # CLI utilities\n│   ├── parser/                 # Flowise JSON parsing\n│   │   ├── parser.ts           # Main parser logic\n│   │   ├── schema.ts           # Validation schemas\n│   │   └── utils.ts            # Parser utilities\n│   ├── ir/                     # Intermediate Representation\n│   │   ├── graph.ts            # Flow graph structure\n│   │   ├── nodes.ts            # Node definitions\n│   │   ├── transformer.ts      # IR transformations\n│   │   └── types.ts            # Type definitions\n│   ├── registry/               # Node converter registry\n│   │   ├── registry.ts         # Main registry\n│   │   └── converters/         # Individual converters\n│   │       ├── llm.ts          # LLM converters\n│   │       ├── memory.ts       # Memory converters\n│   │       ├── prompt.ts       # Prompt converters\n│   │       └── chain.ts        # Chain converters\n│   ├── emitters/               # Code generation\n│   │   ├── typescript/         # TypeScript emitter\n│   │   │   ├── emitter.ts      # Main emitter\n│   │   │   ├── converters/     # Language-specific converters\n│   │   │   └── templates/      # Code templates\n│   │   └── utils/              # Emitter utilities\n│   ├── converter.ts            # Main converter class\n│   ├── index.ts                # Public API exports\n│   └── utils/                  # Shared utilities\n├── test/                       # Test suites\n│   ├── unit/                   # Unit tests\n│   ├── integration/            # Integration tests\n│   ├── fixtures/               # Test data\n│   └── utils/                  # Test utilities\n├── examples/                   # Example flows\n│   ├── basic/                  # Simple examples\n│   ├── complex/                # Advanced examples\n│   └── edge-cases/             # Error cases\n├── docs/                       # Documentation\n│   ├── api/                    # API documentation\n│   └── guides/                 # User guides\n├── bin/                        # CLI executables\n└── scripts/                    # Build and utility scripts\n```\n\n### Key Components\n\n1. **Parser** (`src/parser/`): Parses and validates Flowise JSON\n2. **IR** (`src/ir/`): Intermediate representation for flow processing\n3. **Registry** (`src/registry/`): Manages node type converters\n4. **Emitters** (`src/emitters/`): Generates target language code\n5. **CLI** (`src/cli/`): Command-line interface\n\n## Coding Standards\n\n### TypeScript Guidelines\n\n1. **Use strict TypeScript**: Enable all strict mode options\n2. **Explicit return types**: Always specify function return types\n3. **Interface over type**: Use interfaces for object shapes\n4. **No `any`**: Avoid `any` type, use `unknown` if needed\n5. **Consistent naming**: Use camelCase for variables, PascalCase for types\n\n**Example**:\n```typescript\n// ✅ Good\ninterface NodeConverter {\n  nodeType: string;\n  convert(node: FlowiseNode): ConversionResult;\n}\n\nclass LLMConverter implements NodeConverter {\n  public readonly nodeType = 'llm';\n  \n  public convert(node: FlowiseNode): ConversionResult {\n    // Implementation\n  }\n}\n\n// ❌ Avoid\nconst converter = (node: any) => {\n  // No return type, uses any\n};\n```\n\n### Code Style\n\n- **Use Prettier**: Auto-format with `npm run format`\n- **Use ESLint**: Lint with `npm run lint`\n- **2-space indentation**: Consistent throughout\n- **Single quotes**: For strings\n- **Trailing commas**: In multiline structures\n- **Semicolons**: Always required\n\n### Error Handling\n\n1. **Use custom error classes**:\n   ```typescript\n   class ValidationError extends Error {\n     constructor(\n       message: string,\n       public readonly nodeId?: string\n     ) {\n       super(message);\n       this.name = 'ValidationError';\n     }\n   }\n   ```\n\n2. **Provide context in errors**:\n   ```typescript\n   throw new ConversionError(\n     `Failed to convert node: ${node.type}`,\n     { nodeId: node.id, phase: 'generation' }\n   );\n   ```\n\n3. **Use Result types for complex operations**:\n   ```typescript\n   type ConversionResult = \n     | { success: true; code: string; metadata: Metadata }\n     | { success: false; errors: ValidationError[] };\n   ```\n\n### Documentation Standards\n\n1. **JSDoc comments** for all public APIs:\n   ```typescript\n   /**\n    * Converts a Flowise flow to LangChain code.\n    * \n    * @param flowData - The Flowise flow JSON data\n    * @param options - Conversion options\n    * @returns Promise resolving to conversion result\n    * @throws {ValidationError} When flow data is invalid\n    * @example\n    * ```typescript\n    * const result = await converter.convert(flowData, {\n    *   targetLanguage: 'typescript'\n    * });\n    * ```\n    */\n   public async convert(\n     flowData: FlowiseFlow,\n     options: ConversionOptions\n   ): Promise<ConversionResult> {\n     // Implementation\n   }\n   ```\n\n2. **README sections** for new features\n3. **Inline comments** for complex logic\n4. **Type definitions** with descriptions\n\n## Testing Guidelines\n\n### Test Structure\n\nWe use **Jest** with the following test categories:\n\n1. **Unit Tests** (`test/unit/`): Test individual functions/classes\n2. **Integration Tests** (`test/integration/`): Test component interactions\n3. **CLI Tests** (`test/cli/`): Test command-line interface\n4. **Golden File Tests** (`test/golden/`): Compare generated output\n\n### Writing Tests\n\n1. **Descriptive test names**:\n   ```typescript\n   describe('LLMConverter', () => {\n     describe('convert', () => {\n       it('should generate ChatOpenAI instance for OpenAI node', () => {\n         // Test implementation\n       });\n       \n       it('should throw ValidationError for missing API key', () => {\n         // Test implementation\n       });\n     });\n   });\n   ```\n\n2. **Use test fixtures**:\n   ```typescript\n   import { loadFixture } from '../utils/test-helpers';\n   \n   const flowData = loadFixture('basic/simple-prompt-llm.json');\n   ```\n\n3. **Mock external dependencies**:\n   ```typescript\n   jest.mock('@langchain/openai', () => ({\n     ChatOpenAI: jest.fn().mockImplementation(() => ({\n       invoke: jest.fn().mockResolvedValue('mocked response')\n     }))\n   }));\n   ```\n\n4. **Test error conditions**:\n   ```typescript\n   it('should handle missing required parameters', () => {\n     const invalidNode = { ...validNode, data: {} };\n     \n     expect(() => converter.convert(invalidNode))\n       .toThrow(ValidationError);\n   });\n   ```\n\n### Test Coverage\n\nMaintain **>90% test coverage** for:\n- All public APIs\n- Core conversion logic\n- Error handling paths\n- CLI commands\n\nCheck coverage with:\n```bash\nnpm run test:coverage\n```\n\n### Adding Test Fixtures\n\n1. **Create test data** in `test/fixtures/`:\n   ```typescript\n   // test/fixtures/sample-flows.ts\n   export const simplePromptLLM: FlowiseFlow = {\n     nodes: [\n       {\n         id: 'prompt-1',\n         type: 'promptTemplate',\n         data: { template: 'Hello {name}' }\n       },\n       {\n         id: 'llm-1',\n         type: 'chatOpenAI',\n         data: { modelName: 'gpt-3.5-turbo' }\n       }\n     ],\n     edges: [{\n       id: 'edge-1',\n       source: 'prompt-1',\n       target: 'llm-1'\n     }]\n   };\n   ```\n\n2. **Use in tests**:\n   ```typescript\n   import { simplePromptLLM } from '../fixtures/sample-flows';\n   \n   it('should convert simple prompt-LLM flow', async () => {\n     const result = await converter.convert(simplePromptLLM);\n     expect(result.success).toBe(true);\n   });\n   ```\n\n## Documentation\n\n### Types of Documentation\n\n1. **API Documentation**: Auto-generated from JSDoc comments\n2. **User Guides**: Step-by-step tutorials\n3. **Developer Guides**: Architecture and contribution docs\n4. **Examples**: Working code examples\n5. **Troubleshooting**: Common issues and solutions\n\n### Documentation Workflow\n\n1. **Update JSDoc comments** for code changes\n2. **Add examples** for new features\n3. **Update README** for user-facing changes\n4. **Create guides** for complex features\n5. **Test documentation** examples\n\n### Writing Guidelines\n\n1. **Clear and concise**: Avoid jargon, explain concepts\n2. **Code examples**: Include working examples\n3. **Error scenarios**: Document error conditions\n4. **Cross-references**: Link related sections\n5. **Keep updated**: Update docs with code changes\n\n## Pull Request Process\n\n### Before Submitting\n\n1. **Run full test suite**:\n   ```bash\n   npm run test\n   npm run test:cli\n   npm run test:coverage\n   ```\n\n2. **Check code quality**:\n   ```bash\n   npm run lint\n   npm run type-check\n   npm run format\n   ```\n\n3. **Build successfully**:\n   ```bash\n   npm run build:production\n   ```\n\n4. **Update documentation** if needed\n\n5. **Add/update tests** for changes\n\n### PR Template\n\nUse this template for pull requests:\n\n```markdown\n## Description\nBrief description of changes\n\n## Type of Change\n- [ ] Bug fix (non-breaking change that fixes an issue)\n- [ ] New feature (non-breaking change that adds functionality)\n- [ ] Breaking change (fix or feature that causes existing functionality to change)\n- [ ] Documentation update\n\n## Testing\n- [ ] New tests added\n- [ ] All tests pass\n- [ ] Manual testing completed\n\n## Documentation\n- [ ] Documentation updated\n- [ ] Examples added/updated\n- [ ] API documentation updated\n\n## Checklist\n- [ ] Code follows style guidelines\n- [ ] Self-review completed\n- [ ] Code is commented appropriately\n- [ ] No security vulnerabilities introduced\n```\n\n### Review Process\n\n1. **Automated checks**: All CI checks must pass\n2. **Code review**: At least one maintainer review required\n3. **Testing**: Reviewers test functionality\n4. **Documentation**: Check docs are updated\n5. **Merge**: Squash and merge to develop branch\n\n### PR Guidelines\n\n1. **Small, focused PRs**: One feature/fix per PR\n2. **Descriptive titles**: Clear, concise description\n3. **Linked issues**: Reference related issues\n4. **Clean history**: Squash commits before merging\n5. **Up-to-date**: Rebase on latest develop\n\n## Issue Guidelines\n\n### Bug Reports\n\nUse the bug report template:\n\n```markdown\n## Bug Description\nClear description of the bug\n\n## Steps to Reproduce\n1. Step one\n2. Step two\n3. See error\n\n## Expected Behavior\nWhat should happen\n\n## Actual Behavior\nWhat actually happens\n\n## Environment\n- OS: [e.g., macOS 12.6]\n- Node.js: [e.g., v18.17.0]\n- npm: [e.g., v9.6.7]\n- Package version: [e.g., v1.0.0]\n\n## Additional Context\nAny other relevant information\n```\n\n### Feature Requests\n\nUse the feature request template:\n\n```markdown\n## Feature Description\nClear description of the feature\n\n## Use Case\nWhy is this feature needed?\n\n## Proposed Solution\nHow should this work?\n\n## Alternatives Considered\nOther approaches considered\n\n## Additional Context\nAny other relevant information\n```\n\n### Issue Labels\n\n- **bug**: Something isn't working\n- **enhancement**: New feature or request\n- **documentation**: Documentation improvements\n- **good first issue**: Good for newcomers\n- **help wanted**: Extra attention needed\n- **question**: Further information requested\n- **wontfix**: This will not be worked on\n\n## Release Process\n\n### Version Numbering\n\nWe follow [Semantic Versioning](https://semver.org/):\n\n- **MAJOR** (1.x.x): Breaking changes\n- **MINOR** (x.1.x): New features, backward compatible\n- **PATCH** (x.x.1): Bug fixes, backward compatible\n\n### Release Workflow\n\n1. **Create release branch**:\n   ```bash\n   git checkout develop\n   git checkout -b release/1.1.0\n   ```\n\n2. **Update version numbers**:\n   ```bash\n   npm version 1.1.0\n   ```\n\n3. **Update CHANGELOG.md**\n\n4. **Run full test suite**\n\n5. **Create PR to main**\n\n6. **Tag release**:\n   ```bash\n   git tag v1.1.0\n   git push origin v1.1.0\n   ```\n\n7. **Publish to npm**:\n   ```bash\n   npm publish\n   ```\n\n8. **Merge back to develop**\n\n### Pre-release Testing\n\n1. **Alpha releases**: Internal testing\n2. **Beta releases**: Community testing\n3. **Release candidates**: Final validation\n4. **Stable release**: Production ready\n\n## Getting Help\n\n### Community Support\n\n- **GitHub Discussions**: Ask questions, share ideas\n- **GitHub Issues**: Bug reports, feature requests\n- **Discord/Slack**: Real-time community chat (if available)\n\n### Maintainer Contact\n\n- **Email**: maintainers@flowise-to-langchain.com\n- **GitHub**: Tag maintainers in issues/PRs\n\n### Resources\n\n- **LangChain Documentation**: https://docs.langchain.com\n- **Flowise Documentation**: https://docs.flowiseai.com\n- **TypeScript Handbook**: https://www.typescriptlang.org/docs\n- **Jest Documentation**: https://jestjs.io/docs\n\n## Recognition\n\nContributors are recognized in:\n\n1. **CONTRIBUTORS.md**: All contributors listed\n2. **Release Notes**: Major contributors mentioned\n3. **GitHub Contributors**: Automatic recognition\n4. **Special Thanks**: Outstanding contributions highlighted\n\n---\n\n## Thank You!\n\nThank you for contributing to the Flowise to LangChain Converter! Your contributions help make this tool better for the entire community.\n\nFor questions about contributing, please reach out via GitHub Discussions or create an issue.\n\n**Happy coding!** 🚀\n