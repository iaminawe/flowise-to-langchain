# Troubleshooting Guide\n\nCommon issues and solutions for the Flowise to LangChain Converter.\n\n## Table of Contents\n\n- [Installation Issues](#installation-issues)\n- [CLI Problems](#cli-problems)\n- [Conversion Errors](#conversion-errors)\n- [TypeScript Issues](#typescript-issues)\n- [Runtime Errors](#runtime-errors)\n- [Performance Issues](#performance-issues)\n- [Environment Setup](#environment-setup)\n- [API Integration](#api-integration)\n\n## Installation Issues\n\n### Problem: \"Cannot find module 'flowise-to-langchain'\"\n\n**Cause**: Package not installed or incorrect import path.\n\n**Solutions**:\n\n1. **Global Installation**:\n   ```bash\n   npm install -g flowise-to-langchain\n   # Verify installation\n   flowise-to-lc --version\n   ```\n\n2. **Local Installation**:\n   ```bash\n   npm install flowise-to-langchain\n   # Use with npx\n   npx flowise-to-lc --version\n   ```\n\n3. **Development Mode**:\n   ```bash\n   cd flowise-to-langchain\n   npm install\n   npm run build\n   npm link\n   ```\n\n### Problem: \"Permission denied\" during installation\n\n**Cause**: Insufficient permissions for global npm installation.\n\n**Solutions**:\n\n1. **Use Node Version Manager** (Recommended):\n   ```bash\n   # Install nvm (Node Version Manager)\n   curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash\n   nvm install 18\n   nvm use 18\n   npm install -g flowise-to-langchain\n   ```\n\n2. **Use npx instead of global installation**:\n   ```bash\n   npx flowise-to-langchain convert flow.json\n   ```\n\n3. **Fix npm permissions**:\n   ```bash\n   mkdir ~/.npm-global\n   npm config set prefix '~/.npm-global'\n   echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.bashrc\n   source ~/.bashrc\n   ```\n\n### Problem: Node.js version compatibility\n\n**Cause**: Using Node.js version < 18.0.0.\n\n**Solution**:\n```bash\n# Check current version\nnode --version\n\n# Install Node.js 18 or higher\nnvm install 18\nnvm use 18\n\n# Or download from https://nodejs.org\n```\n\n## CLI Problems\n\n### Problem: \"Command not found: flowise-to-lc\"\n\n**Debugging Steps**:\n\n1. **Check installation**:\n   ```bash\n   npm list -g flowise-to-langchain\n   which flowise-to-lc\n   ```\n\n2. **Use full path**:\n   ```bash\n   $(npm root -g)/flowise-to-langchain/bin/flowise-to-lc.js --version\n   ```\n\n3. **Use npx**:\n   ```bash\n   npx flowise-to-langchain --version\n   ```\n\n4. **Development mode**:\n   ```bash\n   cd flowise-to-langchain\n   npm run dev -- --version\n   ```\n\n### Problem: CLI hangs or doesn't respond\n\n**Debugging Steps**:\n\n1. **Enable verbose mode**:\n   ```bash\n   flowise-to-lc convert flow.json --verbose\n   ```\n\n2. **Check file permissions**:\n   ```bash\n   ls -la flow.json\n   chmod 644 flow.json\n   ```\n\n3. **Validate input file**:\n   ```bash\n   flowise-to-lc validate flow.json\n   ```\n\n4. **Use timeout**:\n   ```bash\n   timeout 30s flowise-to-lc convert flow.json\n   ```\n\n### Problem: \"Invalid JSON\" error\n\n**Solutions**:\n\n1. **Validate JSON syntax**:\n   ```bash\n   jq . flow.json  # Install jq: brew install jq\n   ```\n\n2. **Check file encoding**:\n   ```bash\n   file flow.json\n   # Should show: \"ASCII text\" or \"UTF-8 Unicode text\"\n   ```\n\n3. **Fix JSON formatting**:\n   ```bash\n   # Auto-fix common JSON issues\n   flowise-to-lc validate flow.json --fix-json\n   ```\n\n## Conversion Errors\n\n### Problem: \"Unsupported node type: XYZ\"\n\n**Cause**: Node type not yet supported by converter.\n\n**Solutions**:\n\n1. **Check supported nodes**:\n   ```bash\n   flowise-to-lc info --supported-nodes\n   ```\n\n2. **Use fallback mode**:\n   ```bash\n   flowise-to-lc convert flow.json --fallback-unsupported\n   ```\n\n3. **Create custom converter**:\n   ```typescript\n   import { NodeConverter, registerConverter } from 'flowise-to-langchain';\n   \n   class XYZConverter implements NodeConverter {\n     nodeType = 'XYZ';\n     // Implementation...\n   }\n   \n   registerConverter(new XYZConverter());\n   ```\n\n### Problem: \"Circular dependency detected\"\n\n**Cause**: Flow contains circular references between nodes.\n\n**Solutions**:\n\n1. **Visualize dependencies**:\n   ```bash\n   flowise-to-lc validate flow.json --show-dependencies\n   ```\n\n2. **Auto-fix circular dependencies**:\n   ```bash\n   flowise-to-lc convert flow.json --break-cycles\n   ```\n\n3. **Manual fix**: Edit Flowise flow to remove circular connections.\n\n### Problem: \"Missing required parameters\"\n\n**Cause**: Node missing required configuration parameters.\n\n**Solutions**:\n\n1. **Detailed validation**:\n   ```bash\n   flowise-to-lc validate flow.json --strict --show-analysis\n   ```\n\n2. **Use default values**:\n   ```bash\n   flowise-to-lc convert flow.json --use-defaults\n   ```\n\n3. **Interactive repair**:\n   ```bash\n   flowise-to-lc repair flow.json\n   ```\n\n## TypeScript Issues\n\n### Problem: \"64+ TypeScript compilation errors\"\n\n**Current Status**: Known issue with production builds.\n\n**Workarounds**:\n\n1. **Use development mode**:\n   ```bash\n   cd flowise-to-langchain\n   npm run dev -- convert flow.json\n   ```\n\n2. **Use relaxed build config**:\n   ```bash\n   npm run build  # Uses tsconfig.build.json with relaxed rules\n   ```\n\n3. **Ignore TypeScript errors temporarily**:\n   ```bash\n   npm run build -- --skipLibCheck\n   ```\n\n### Problem: \"Type 'X' is not assignable to type 'Y'\"\n\n**Solutions**:\n\n1. **Update TypeScript**:\n   ```bash\n   npm update typescript\n   ```\n\n2. **Add type assertions**:\n   ```typescript\n   const result = data as ExpectedType;\n   ```\n\n3. **Use type guards**:\n   ```typescript\n   if ('property' in data) {\n     // TypeScript now knows data has property\n   }\n   ```\n\n### Problem: Missing type definitions\n\n**Solutions**:\n\n1. **Install missing types**:\n   ```bash\n   npm install --save-dev @types/node @types/jest\n   ```\n\n2. **Create declaration file**:\n   ```typescript\n   // types.d.ts\n   declare module 'missing-module' {\n     export function someFunction(): void;\n   }\n   ```\n\n## Runtime Errors\n\n### Problem: \"Cannot read property of undefined\"\n\n**Common Causes & Solutions**:\n\n1. **Missing environment variables**:\n   ```bash\n   # Check required env vars\n   echo $OPENAI_API_KEY\n   echo $LANGFUSE_PUBLIC_KEY\n   \n   # Create .env file\n   cat > .env << EOF\n   OPENAI_API_KEY=your_key_here\n   LANGFUSE_PUBLIC_KEY=your_key_here\n   EOF\n   ```\n\n2. **Missing dependencies**:\n   ```bash\n   npm install @langchain/openai @langchain/core\n   ```\n\n3. **Incorrect node configuration**:\n   ```bash\n   flowise-to-lc validate flow.json --check-dependencies\n   ```\n\n### Problem: \"Module not found\" in generated code\n\n**Solutions**:\n\n1. **Install missing packages**:\n   ```bash\n   # Check generated package.json\n   cat output/package.json\n   \n   # Install dependencies\n   cd output && npm install\n   ```\n\n2. **Use correct import paths**:\n   ```bash\n   flowise-to-lc convert flow.json --format esm\n   ```\n\n3. **Generate with all dependencies**:\n   ```bash\n   flowise-to-lc convert flow.json --include-all-deps\n   ```\n\n### Problem: API rate limiting or authentication errors\n\n**Solutions**:\n\n1. **Check API keys**:\n   ```bash\n   # Test OpenAI key\n   curl -H \"Authorization: Bearer $OPENAI_API_KEY\" \\\n        https://api.openai.com/v1/models\n   ```\n\n2. **Add retry logic**:\n   ```bash\n   flowise-to-lc convert flow.json --with-retry\n   ```\n\n3. **Use mock mode for testing**:\n   ```bash\n   flowise-to-lc test flow.json --mock-external\n   ```\n\n## Performance Issues\n\n### Problem: Slow conversion times\n\n**Solutions**:\n\n1. **Enable caching**:\n   ```bash\n   flowise-to-lc convert flow.json --cache\n   ```\n\n2. **Use parallel processing**:\n   ```bash\n   flowise-to-lc convert *.json --parallel\n   ```\n\n3. **Reduce verbosity**:\n   ```bash\n   flowise-to-lc convert flow.json --silent\n   ```\n\n### Problem: High memory usage\n\n**Solutions**:\n\n1. **Process files individually**:\n   ```bash\n   for file in *.json; do\n     flowise-to-lc convert \"$file\" --out \"./output/${file%.json}\"\n   done\n   ```\n\n2. **Increase Node.js memory**:\n   ```bash\n   node --max-old-space-size=4096 bin/flowise-to-lc.js convert large-flow.json\n   ```\n\n### Problem: Generated code is slow\n\n**Solutions**:\n\n1. **Enable optimizations**:\n   ```bash\n   flowise-to-lc convert flow.json --optimize\n   ```\n\n2. **Use streaming where possible**:\n   ```bash\n   flowise-to-lc convert flow.json --enable-streaming\n   ```\n\n## Environment Setup\n\n### Problem: Environment variables not loading\n\n**Solutions**:\n\n1. **Check .env file location**:\n   ```bash\n   ls -la .env\n   cat .env\n   ```\n\n2. **Load environment explicitly**:\n   ```bash\n   source .env\n   flowise-to-lc convert flow.json\n   ```\n\n3. **Use --env-file option**:\n   ```bash\n   flowise-to-lc convert flow.json --env-file .env.production\n   ```\n\n### Problem: Docker/Container issues\n\n**Solutions**:\n\n1. **Use Node.js Alpine image**:\n   ```dockerfile\n   FROM node:18-alpine\n   RUN npm install -g flowise-to-langchain\n   ```\n\n2. **Mount volumes correctly**:\n   ```bash\n   docker run -v $(pwd):/workspace node:18 \\\n     npx flowise-to-langchain convert /workspace/flow.json\n   ```\n\n## API Integration\n\n### Problem: LangFuse integration not working\n\n**Solutions**:\n\n1. **Verify LangFuse credentials**:\n   ```bash\n   curl -X POST https://cloud.langfuse.com/api/public/auth/check \\\n        -H \"Authorization: Bearer $LANGFUSE_PUBLIC_KEY\"\n   ```\n\n2. **Test LangFuse in generated code**:\n   ```typescript\n   import { LangfuseHandler } from 'langfuse-langchain';\n   \n   const handler = new LangfuseHandler({\n     publicKey: process.env.LANGFUSE_PUBLIC_KEY,\n     secretKey: process.env.LANGFUSE_SECRET_KEY\n   });\n   \n   await handler.flush(); // Test connection\n   ```\n\n3. **Generate without LangFuse**:\n   ```bash\n   flowise-to-lc convert flow.json --no-langfuse\n   ```\n\n### Problem: External API timeouts\n\n**Solutions**:\n\n1. **Increase timeouts**:\n   ```bash\n   flowise-to-lc convert flow.json --timeout 60000\n   ```\n\n2. **Add retry logic**:\n   ```typescript\n   const llm = new ChatOpenAI({\n     timeout: 30000,\n     maxRetries: 3\n   });\n   ```\n\n## Getting Help\n\n### Debug Mode\n\nEnable comprehensive debugging:\n\n```bash\n# Maximum verbosity\nDEBUG=* flowise-to-lc convert flow.json --verbose\n\n# Specific debug categories\nDEBUG=converter:* flowise-to-lc convert flow.json\nDEBUG=parser:* flowise-to-lc validate flow.json\n```\n\n### Generate Debug Report\n\n```bash\n# Create comprehensive debug report\nflowise-to-lc debug-report flow.json > debug-report.txt\n```\n\n### System Information\n\n```bash\n# Check system info\nflowise-to-lc info --system\n\n# Check converter capabilities\nflowise-to-lc info --capabilities\n\n# Version information\nflowise-to-lc --version\nnode --version\nnpm --version\n```\n\n### Community Support\n\n- **GitHub Issues**: [Report bugs and issues](https://github.com/username/flowise-to-langchain/issues)\n- **Discussions**: [Ask questions and share ideas](https://github.com/username/flowise-to-langchain/discussions)\n- **Documentation**: [Complete documentation](./API.md)\n\n### Professional Support\n\nFor enterprise users:\n- Email: support@flowise-to-langchain.com\n- Priority issue resolution\n- Custom converter development\n- Training and consultation\n\n---\n\n## Error Codes Reference\n\n| Code | Category | Description | Solution |\n|------|----------|-------------|----------|\n| E001 | Validation | Invalid JSON format | Check JSON syntax |\n| E002 | Validation | Missing required node | Add missing node |\n| E003 | Conversion | Unsupported node type | Update converter or use fallback |\n| E004 | Conversion | Circular dependency | Remove circular references |\n| E005 | Runtime | Missing API key | Set environment variables |\n| E006 | Runtime | Network timeout | Increase timeout or check connection |\n| E007 | Build | TypeScript error | Fix type issues or use build config |\n| E008 | CLI | Command not found | Check installation |\n\nFor unlisted errors, please [create an issue](https://github.com/username/flowise-to-langchain/issues) with the full error message and debug output.\n